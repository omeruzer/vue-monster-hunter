<!DOCTYPE html>
<html>
<head>
    <title>Canavar Avı</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <link rel="stylesheet" href="css/foundation.min.css">
    <link rel="stylesheet" href="css/app.css">
</head>
<body>
<div id="app">
    <section class="row">
        <div class="small-6 columns">
            <h1 class="text-center">SEN</h1>
            <div class="healthbar">
                <div :style='{width: player_heal + "%"}' class="healthbar text-center" style="background-color: green; margin: 0; color: white;">
                    {{player_heal }} %
                </div>
            </div>
        </div>
        <div class="small-6 columns">
            <h1 class="text-center">CANAVAR</h1>
            <div class="healthbar">
                <div :style='{width: monster_heal + "%"}' class="healthbar text-center" style="background-color: green; margin: 0; color: white;">
                    {{monster_heal }} %
                </div>
            </div>
        </div>
    </section>

    <section class="row controls" v-if='!isStart'>
        <div class="small-12 columns">
            <button @click='startGame()' id="start-game">YENİ OYUN</button>
        </div>
    </section>

    <section v-if='isStart' class="row controls">
        <div class="small-12 columns">
            <button @click='attack()' id="attack">SALDIRI</button>
            <button @click='specialAttack()' id="special-attack">ÖZEL SALDIRI</button>
            <button @click='healUp()' id="heal">İLK YARDIM</button>
            <button @click='giveUp()' id="give-up">PES ET!</button>
        </div>
    </section>

    <section v-if='isStart' class="row log">
        <div class="small-12 columns">
            <ul>
                <li :class='{ "player-turn": log.turn == "P" , "monster-turn":log.turn == "M" }' v-for='log in logs'>
                    {{log.text}}
                </li>
            </ul>
        </div>
    </section>

</div>

<script>
    new Vue({
        el:'#app',
        data:{
            player_heal: 100,
            monster_heal: 100,
            isStart: false,
            logs : []
        },
        methods: {
            startGame(){
                this.isStart = true
            },
            attack(){
                var point = Math.ceil(Math.random()*10);
                this.monster_heal-=point
                this.addLog({ turn: 'P', text: 'OYUNCU ATAĞI ('+ point +')' })
                this.monsterAttack()

            },
            specialAttack(){
                var point = Math.ceil(Math.random()*25);
                this.monster_heal-=point
                this.addLog({ turn: 'P', text: 'OYUNCU ÖZEL ATAĞI ('+ point +')' })
                this.monsterAttack()

            },
            healUp(){
                var point = Math.ceil(Math.random()*20);
                this.player_heal+=point
                this.addLog({ turn: 'P', text: 'İLK YARDIM ('+ point +')' })
                this.monsterAttack()

            },
            giveUp(){
                this.player_heal=0
                this.addLog({ turn: 'P', text: 'OYUNCU PES ETTİ' })
                this.logs = []

            },
            monsterAttack(){
                var point = Math.ceil(Math.random()*10);
                this.player_heal-=point
                this.addLog({ turn: 'M', text: 'CANAVAR ATAĞI ('+ point +')' })
            },
            addLog : function (log) {
                this.logs.push(log);
            }
        },
        watch:{
            player_heal: function (value) {
                if(value <= 0){
                    this.player_heal = 0

                    if(confirm('Kaybettin Tekrar Oynamak İster misin?')){
                        this.player_heal=100;
                        this.monster_heal=100;
                        this.logs = []
                    }else{
                        this.player_heal=100;
                        this.monster_heal=100;
                        this.isStart = false
                        this.logs = []
                    }

                }else if(value >= 100){
                    this.player_heal = 100
                }
            },
            monster_heal: function (value) {
                if(value <= 0){
                    this.monster_heal = 0
                    if(confirm('Kazandın Tekrar Oynamak İster misin?')){
                        this.player_heal=100;
                        this.monster_heal=100;
                        this.logs = []
                    }else{
                        this.player_heal=100;
                        this.monster_heal=100;
                        this.isStart = false
                        this.logs = []
                    }
                }
            },
        }
    });
</script>
</body>
</html>